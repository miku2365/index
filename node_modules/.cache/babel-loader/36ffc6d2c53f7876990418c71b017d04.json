{"remainingRequest":"/home/miku2365/Blog-Index/node_modules/babel-loader/lib/index.js!/home/miku2365/Blog-Index/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/home/miku2365/Blog-Index/src/assets/mobile-event.js","dependencies":[{"path":"/home/miku2365/Blog-Index/src/assets/mobile-event.js","mtime":1666325294494},{"path":"/home/miku2365/Blog-Index/babel.config.js","mtime":1666325294494},{"path":"/home/miku2365/Blog-Index/node_modules/cache-loader/dist/cjs.js","mtime":1666325335561},{"path":"/home/miku2365/Blog-Index/node_modules/babel-loader/lib/index.js","mtime":1666325318221},{"path":"/home/miku2365/Blog-Index/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1666325332398}],"contextDependencies":[],"result":["import _typeof from \"/home/miku2365/Blog-Index/node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js\";\nimport _classCallCheck from \"/home/miku2365/Blog-Index/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/miku2365/Blog-Index/node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js\";\n\n/**\n * 处理 移动设备上的 点击、长按、左右上下滑动 事件\n *\n * =========================================\n * 导出了7个自定义指令：\n *  v-tap： tap点击事件\n *  v-swipe： swipe滑动事件\n *  v-swipeleft： swipeleft左滑事件\n *  v-swiperight： swiperight右滑事件\n *  v-swipedown： swipedown下滑\n *  v-swipeup： swipeup上滑\n *  v-longtap： longtap长按\n * =========================================\n *\n * =========================================\n * 包含四个参数\n * stop 阻止冒泡\n * prevent 阻止默认事件\n * self 只当在 event.target 是当前元素自身时触发处理函数\n * once 执行一次后解绑\n *\n * @example v-tap.stop.prevent.self.once\n * =========================================\n *\n * =========================================\n * 事件绑定有两种方式\n * @example\n *  1. v-tap=\"showDialog\" 绑定一个方法对象\n *  2. v-tap=\"{fn:click123, param1:1, param2:2, param3:{aaa:'123'} ...}\"\n *      绑定一个JSON字面量，fn是执行的方法，后边的是需要传递的参数\n * 事件回调参数\n * @param 第一个参数是event，事件对象\n * @param 第二个参数是 binding.value，也就是v-tap=\"\"双引号中的部分（如示例2，第二个参数就是 {fn:click123, param1:1, param2:2, param3:{aaa:'123'} ...}）\n * =========================================\n *\n * @update\n *  1. 根据MUI进行了滑动事件的判断修正\n *  2. 根据TouchEvent修正了点击位置的判断\n *\n */\nimport Vue from 'vue';\n/**\n * vue上点击事件处理类\n */\n\nvar VueTouch = /*#__PURE__*/function () {\n  /**\n   * @param el\n   * @param binding\n   * @param type\n   */\n  function VueTouch(el, binding, type) {\n    _classCallCheck(this, VueTouch);\n\n    var g = this;\n    g.obj = el;\n    g.binding = binding;\n    g.touchType = type;\n    g.firstTouchPosition = {\n      x: 0,\n      y: 0\n    };\n    g.firstTouchTime = 0;\n    g.callBack = _typeof(binding.value) === \"object\" ? binding.value.fn : binding.value;\n    g.moved = false;\n    g.leaved = false;\n    g.longTouched = false; // 事件监听回调集合\n\n    var _listener = Object.create(null); // 事件方法\n\n\n    var _listen = function _listen(type) {\n      return function (e) {\n        var _g$binding$modifiers = g.binding.modifiers,\n            stop = _g$binding$modifiers.stop,\n            prevent = _g$binding$modifiers.prevent,\n            self = _g$binding$modifiers.self,\n            once = _g$binding$modifiers.once; // 配置判断\n\n        if (stop) e.stopPropagation();\n        if (prevent) e.preventDefault();\n        if (once) g.obj.removeEventListener(\"touch\" + type, _listener[type]);\n        if (self && e.target !== e.currentTarget) return;\n        g[type](e);\n      };\n    };\n\n    _listener.start = _listen('start');\n    _listener.end = _listen('end');\n    _listener.move = _listen('move');\n    this.obj.addEventListener(\"touchstart\", _listener.start, false);\n    this.obj.addEventListener(\"touchend\", _listener.end, false);\n    this.obj.addEventListener(\"touchmove\", _listener.move, false);\n  }\n\n  _createClass(VueTouch, [{\n    key: \"start\",\n    value: function start(e) {\n      var g = this; // 初始化点击状态\n\n      g.moved = false;\n      g.leaved = false;\n      g.longTouched = false;\n      g.firstTouchPosition = g.getMultiCenter(e.changedTouches);\n      g.firstTouchTime = e.timeStamp;\n      g.time = setTimeout(function () {\n        if (!g.leaved && !g.moved) {\n          g.touchType === \"longtap\" && g.callBack(e, g.binding.value);\n          g.longTouched = true;\n        }\n      }.bind(g), 1000);\n    }\n  }, {\n    key: \"end\",\n    value: function end(e) {\n      var g = this;\n\n      var _g$getMultiCenter = g.getMultiCenter(e.changedTouches),\n          x = _g$getMultiCenter.x,\n          y = _g$getMultiCenter.y;\n\n      var _disX = x - g.firstTouchPosition.x;\n\n      var _disY = y - g.firstTouchPosition.y;\n\n      var _dis = Math.sqrt(_disX * _disX + _disY * _disY);\n\n      var _timeDis = e.timeStamp - g.firstTouchTime;\n\n      clearTimeout(g.time);\n\n      var _angle = this.getAngle(_disX, _disY);\n\n      if (_dis > 18 && _timeDis < 300) {\n        g.touchType === \"swipe\" && g.callBack(e, g.binding.value);\n        if (_angle >= 60 && _angle <= 120) g.touchType === \"swipedown\" && g.callBack(e, g.binding.value);\n        if (_angle <= -60 && _angle >= -120) g.touchType === \"swipeup\" && g.callBack(e, g.binding.value);\n        if (_angle <= 20 && _angle >= -20) g.touchType === \"swipeleft\" && g.callBack(e, g.binding.value);\n        if (_angle <= -160 && _angle > -180 || _angle >= 160 && _angle <= 180) g.touchType === \"swiperight\" && g.callBack(e, g.binding.value);\n      } else {\n        if (!g.longTouched && !g.moved) {\n          g.touchType === \"tap\" && g.callBack(e, g.binding.value);\n          g.leaved = true;\n        }\n      }\n    }\n  }, {\n    key: \"move\",\n    value: function move() {\n      this.moved = true;\n    }\n    /**\n     * 获取点击集合的中心坐标\n     * @param touches touch对象集合\n     * @return {{x: number, y: number}}\n     */\n\n  }, {\n    key: \"getMultiCenter\",\n    value: function getMultiCenter(touches) {\n      var x = 0,\n          y = 0;\n      var _length = touches.length;\n\n      for (var i = 0; i < _length; i++) {\n        x += touches[i].pageX;\n        y += touches[i].pageY;\n      }\n\n      return {\n        x: Math.round(x / _length),\n        y: Math.round(y / _length)\n      };\n    }\n  }, {\n    key: \"getAngle\",\n    value: function getAngle(disX, disY) {\n      if (typeof disX !== 'number' || typeof disY !== 'number') return 45;\n      return Math.atan2(disY, disX) * 180 / Math.PI;\n    }\n  }]);\n\n  return VueTouch;\n}();\n\nVue.directive(\"tap\", {\n  bind: function bind(el, binding) {\n    new VueTouch(el, binding, \"tap\");\n  }\n});\nVue.directive(\"swipe\", {\n  bind: function bind(el, binding) {\n    new VueTouch(el, binding, \"swipe\");\n  }\n});\nVue.directive(\"swipeleft\", {\n  bind: function bind(el, binding) {\n    new VueTouch(el, binding, \"swipeleft\");\n  }\n});\nVue.directive(\"swiperight\", {\n  bind: function bind(el, binding) {\n    new VueTouch(el, binding, \"swiperight\");\n  }\n});\nVue.directive(\"swipedown\", {\n  bind: function bind(el, binding) {\n    new VueTouch(el, binding, \"swipedown\");\n  }\n});\nVue.directive(\"swipeup\", {\n  bind: function bind(el, binding) {\n    new VueTouch(el, binding, \"swipeup\");\n  }\n});\nVue.directive(\"longtap\", {\n  bind: function bind(el, binding) {\n    new VueTouch(el, binding, \"longtap\");\n  }\n});",{"version":3,"sources":["/home/miku2365/Blog-Index/src/assets/mobile-event.js"],"names":["Vue","VueTouch","el","binding","type","g","obj","touchType","firstTouchPosition","x","y","firstTouchTime","callBack","value","fn","moved","leaved","longTouched","_listener","Object","create","_listen","e","modifiers","stop","prevent","self","once","stopPropagation","preventDefault","removeEventListener","target","currentTarget","start","end","move","addEventListener","getMultiCenter","changedTouches","timeStamp","time","setTimeout","bind","_disX","_disY","_dis","Math","sqrt","_timeDis","clearTimeout","_angle","getAngle","touches","_length","length","i","pageX","pageY","round","disX","disY","atan2","PI","directive"],"mappings":"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","sourcesContent":["/**\n * 处理 移动设备上的 点击、长按、左右上下滑动 事件\n *\n * =========================================\n * 导出了7个自定义指令：\n *  v-tap： tap点击事件\n *  v-swipe： swipe滑动事件\n *  v-swipeleft： swipeleft左滑事件\n *  v-swiperight： swiperight右滑事件\n *  v-swipedown： swipedown下滑\n *  v-swipeup： swipeup上滑\n *  v-longtap： longtap长按\n * =========================================\n *\n * =========================================\n * 包含四个参数\n * stop 阻止冒泡\n * prevent 阻止默认事件\n * self 只当在 event.target 是当前元素自身时触发处理函数\n * once 执行一次后解绑\n *\n * @example v-tap.stop.prevent.self.once\n * =========================================\n *\n * =========================================\n * 事件绑定有两种方式\n * @example\n *  1. v-tap=\"showDialog\" 绑定一个方法对象\n *  2. v-tap=\"{fn:click123, param1:1, param2:2, param3:{aaa:'123'} ...}\"\n *      绑定一个JSON字面量，fn是执行的方法，后边的是需要传递的参数\n * 事件回调参数\n * @param 第一个参数是event，事件对象\n * @param 第二个参数是 binding.value，也就是v-tap=\"\"双引号中的部分（如示例2，第二个参数就是 {fn:click123, param1:1, param2:2, param3:{aaa:'123'} ...}）\n * =========================================\n *\n * @update\n *  1. 根据MUI进行了滑动事件的判断修正\n *  2. 根据TouchEvent修正了点击位置的判断\n *\n */\n\nimport Vue from 'vue';\n\n/**\n * vue上点击事件处理类\n */\nclass VueTouch {\n  /**\n   * @param el\n   * @param binding\n   * @param type\n   */\n  constructor(el, binding, type) {\n\n    let g = this;\n\n    g.obj = el;\n    g.binding = binding;\n    g.touchType = type;\n\n    g.firstTouchPosition = { x: 0, y: 0 };\n    g.firstTouchTime = 0;\n    g.callBack = typeof (binding.value) === \"object\" ? binding.value.fn : binding.value;\n\n    g.moved = false;\n    g.leaved = false;\n    g.longTouched = false;\n\n    // 事件监听回调集合\n    let _listener = Object.create(null);\n\n    // 事件方法\n    let _listen = (type) => {\n      return function (e) {\n        let { stop, prevent, self, once } = g.binding.modifiers;\n\n        // 配置判断\n        if (stop) e.stopPropagation();\n        if (prevent) e.preventDefault();\n        if (once) g.obj.removeEventListener(\"touch\" + type, _listener[type]);\n        if (self && e.target !== e.currentTarget) return;\n\n        g[type](e);\n      }\n    };\n\n    _listener.start = _listen('start');\n    _listener.end = _listen('end');\n    _listener.move = _listen('move');\n\n    this.obj.addEventListener(\"touchstart\", _listener.start, false);\n    this.obj.addEventListener(\"touchend\", _listener.end, false);\n    this.obj.addEventListener(\"touchmove\", _listener.move, false);\n  }\n\n  start(e) {\n\n    let g = this;\n\n    // 初始化点击状态\n    g.moved = false;\n    g.leaved = false;\n    g.longTouched = false;\n\n    g.firstTouchPosition = g.getMultiCenter(e.changedTouches);\n    g.firstTouchTime = e.timeStamp;\n    g.time = setTimeout(function () {\n      if (!g.leaved && !g.moved) {\n        g.touchType === \"longtap\" && g.callBack(e, g.binding.value);\n        g.longTouched = true;\n      }\n    }.bind(g), 1000);\n  }\n\n  end(e) {\n\n    let g = this;\n\n    let { x, y } = g.getMultiCenter(e.changedTouches);\n    let _disX = x - g.firstTouchPosition.x;\n    let _disY = y - g.firstTouchPosition.y;\n    let _dis = Math.sqrt(_disX * _disX + _disY * _disY);\n    let _timeDis = e.timeStamp - g.firstTouchTime;\n\n    clearTimeout(g.time);\n\n    let _angle = this.getAngle(_disX, _disY);\n\n    if (_dis > 18 && _timeDis < 300) {\n      g.touchType === \"swipe\" && g.callBack(e, g.binding.value);\n      if (_angle >= 60 && _angle <= 120)\n        g.touchType === \"swipedown\" && g.callBack(e, g.binding.value);\n      if (_angle <= -60 && _angle >= -120)\n        g.touchType === \"swipeup\" && g.callBack(e, g.binding.value);\n      if (_angle <= 20 && _angle >= -20)\n        g.touchType === \"swipeleft\" && g.callBack(e, g.binding.value);\n      if ((_angle <= -160 && _angle > -180) || (_angle >= 160 && _angle <= 180))\n        g.touchType === \"swiperight\" && g.callBack(e, g.binding.value);\n    } else {\n      if (!g.longTouched && !g.moved) {\n        g.touchType === \"tap\" && g.callBack(e, g.binding.value);\n        g.leaved = true;\n      }\n    }\n  }\n\n  move() {\n    this.moved = true;\n  }\n\n  /**\n   * 获取点击集合的中心坐标\n   * @param touches touch对象集合\n   * @return {{x: number, y: number}}\n   */\n  getMultiCenter(touches) {\n\n    let  x = 0, y = 0;\n\n    const _length = touches.length;\n\n    for (let i = 0; i < _length; i++) {\n      x += touches[i].pageX;\n      y += touches[i].pageY;\n    }\n\n    return {\n      x: Math.round(x / _length),\n      y: Math.round(y / _length)\n    };\n  }\n\n  getAngle(disX, disY) {\n\n    if (typeof disX !== 'number' || typeof disY !== 'number')\n      return 45;\n\n    return Math.atan2(disY, disX) * 180 / Math.PI;\n  }\n}\n\n\nVue.directive(\"tap\", {\n  bind: function (el, binding) {\n    new VueTouch(el, binding, \"tap\");\n  }\n});\nVue.directive(\"swipe\", {\n  bind: function (el, binding) {\n    new VueTouch(el, binding, \"swipe\");\n  }\n});\nVue.directive(\"swipeleft\", {\n  bind: function (el, binding) {\n    new VueTouch(el, binding, \"swipeleft\");\n  }\n});\nVue.directive(\"swiperight\", {\n  bind: function (el, binding) {\n    new VueTouch(el, binding, \"swiperight\");\n  }\n});\nVue.directive(\"swipedown\", {\n  bind: function (el, binding) {\n    new VueTouch(el, binding, \"swipedown\");\n  }\n});\nVue.directive(\"swipeup\", {\n  bind: function (el, binding) {\n    new VueTouch(el, binding, \"swipeup\");\n  }\n});\nVue.directive(\"longtap\", {\n  bind: function (el, binding) {\n    new VueTouch(el, binding, \"longtap\");\n  }\n});"]}]}